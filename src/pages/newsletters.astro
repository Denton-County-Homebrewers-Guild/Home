---
import Layout from "../layouts/Layout.astro";
import newsletters from "../config/newsletters.json";
---

<Layout class="pt-64">
  <div class="w-full">
    <h1 class="mb-4">Newsletters</h1>
    <div class="newsletter-container">
      <div class="newsletter-sidebar">
        <ul>
          {
            newsletters.map((newsletter) => (
              <li key={newsletter.name}>
                <a
                  href={newsletter.url}
                  rel="noopener noreferrer"
                  class="newsletter-link"
                >
                  {newsletter.name}
                </a>
              </li>
            ))
          }
        </ul>
      </div>
      <div class="newsletter-content">
        <iframe
          src="https://docs.google.com/document/d/e/2PACX-1vSvpfylpR8dtDdmmC_iVf15SYEVpBH786tddm1zjdFRZvxP2PrcdgUizVo_IeUgpg/pub?embedded=true"
          id="news-content"></iframe>
      </div>
    </div>
  </div>

  <style>
    .newsletter-container {
      display: flex;
      gap: 1rem;
      min-height: 100vh;
    }

    .newsletter-sidebar {
      width: 33.333333%;
      flex-shrink: 0;
      border: 1px solid currentColor;
      background-color: rgb(239 68 68);
      padding: 1rem;
    }

    .newsletter-content {
      width: 66.666667%;
      flex-shrink: 0;
      border: 1px solid currentColor;
      background-color: rgb(239 68 68);
    }

    #news-content {
      width: 100%;
      height: 100%;
      min-height: 100vh;
      border: none;
    }

    #content {
      background-color: rgba(0, 0, 0, 0.6);
      color: white;
      max-width: 600px;
      margin: 2rem auto;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
  </style>
</Layout>
<script is:inline>
  document.addEventListener("DOMContentLoaded", function () {
    const links = document.querySelectorAll(".newsletter-link");
    links.forEach((link) => {
      link.addEventListener("click", function (event) {
        event.preventDefault();
        const url = this.getAttribute("href").concat("?embedded=true");
        const iframe = document.getElementById("news-content");
        iframe.src = url;
      });
    });
  });
</script>
